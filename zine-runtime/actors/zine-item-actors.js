import * as THREE from 'three';
import alea from 'alea';
import metaversefileApi from '../../metaversefile-api.js';

const itemNames = [
  'alienburger.glb',
  'aliencontroller.glb',
  'aliencoral.glb',
  'aliencorn.glb',
  'aliendrumstick.glb',
  'aliengrub.glb',
  'alienguitar.glb',
  'alienhay.glb',
  'alienlily.glb',
  'alienmeat.glb',
  'aliensalamander.glb',
  'alienshroom.glb',
  'alienslug.glb',
  'aliensoul.glb',
  'alientongue.glb',
  'alienvein.glb',
  'amber.glb',
  'amulet.glb',
  'ancientdrone.glb',
  'ancientstaff.glb',
  'ancientturret.glb',
  'antenna.glb',
  'armorchip.glb',
  'armybadge.glb',
  'avocado.glb',
  'axe.glb',
  'batterybug.glb',
  'beetle.glb',
  'blackcore.glb',
  'blackcurrant.glb',
  'blackheart.glb',
  'blackkey.glb',
  'blacklamp.glb',
  'blacklight.glb',
  'blackorb.glb',
  'blackpopsickle.glb',
  'blackpotion.glb',
  'blackrobe.glb',
  'blacktorch.glb',
  'blackwand.glb',
  'bloodchip.glb',
  'bloodclub.glb',
  'bloodflask.glb',
  'bluecore.glb',
  'bluekey.glb',
  'bluelamp.glb',
  'bluepopsickle.glb',
  'blueshroom.glb',
  'bonsaitree.glb',
  'broccoli.glb',
  'broomstick.glb',
  'brownfruit.glb',
  'brownlandmine.glb',
  'brownpebbles.glb',
  'brownpotion.glb',
  'bugmask.glb',
  'bun.glb',
  'burner.glb',
  'charm.glb',
  'cinder.glb',
  'claw.glb',
  'clownhat.glb',
  'coconut.glb',
  'comet.glb',
  'connector.glb',
  'coralfruit.glb',
  'crabplant.glb',
  'creambarrel.glb',
  'creamflower.glb',
  'creamfruit.glb',
  'creampotion.glb',
  'crystalball.glb',
  'crystalwings.glb',
  'cyberbeer.glb',
  'cyberheart.glb',
  'cybermachine.glb',
  'darkgreenkey.glb',
  'darkgreennecklace.glb',
  'deathflute.glb',
  'dessert.glb',
  'diary.glb',
  'doublepill.glb',
  'dragonmask.glb',
  'dreamcatcher.glb',
  'drone.glb',
  'drum.glb',
  'eggfruit.glb',
  'eggshell.glb',
  'electricpill.glb',
  'energycell.glb',
  'eyepotion.glb',
  'fancydinner.glb',
  'ferrite.glb',
  'filet.glb',
  'firebadge.glb',
  'firebamboo.glb',
  'firelandmine.glb',
  'firepotion.glb',
  'firesword.glb',
  'fishsteak.glb',
  'flamepotion.glb',
  'flint.glb',
  'flytrap.glb',
  'fruitdrink.glb',
  'furnace.glb',
  'fusionfurnace.glb',
  'gasmask.glb',
  'ghostfruit.glb',
  'ghostslime.glb',
  'gigasword.glb',
  'globe.glb',
  'goldkey.glb',
  'gravityanchor.glb',
  'greenfountain.glb',
  'greenkey.glb',
  'greenorchid.glb',
  'greenrock.glb',
  'grenade.glb',
  'greypotion.glb',
  'gutshroom.glb',
  'handaxe.glb',
  'heartbag.glb',
  'holychip.glb',
  'honey.glb',
  'honeychip.glb',
  'honeycomb.glb',
  'honeypotion.glb',
  'hookah.glb',
  'icepotion.glb',
  'idchip.glb',
  'ink.glb',
  'jar.glb',
  'junglefruit.glb',
  'kazoo.glb',
  'keg.glb',
  'kiwi.glb',
  'knife.glb',
  'knightmask.glb',
  'labstation.glb',
  'lamp.glb',
  'lamplet.glb',
  'landmine.glb',
  'leatherbook.glb',
  'leek.glb',
  'lifepotion.glb',
  'lightbluekey.glb',
  'lightbluerock.glb',
  'lightgreenkey.glb',
  'lightscanner.glb',
  'limefruit.glb',
  'limepotion.glb',
  'liquidkey.glb',
  'liver.glb',
  'lovepotion.glb',
  'machinesoul.glb',
  'magicdagger.glb',
  'magickey.glb',
  'magitek.glb',
  'mapbook.glb',
  'maroonflower.glb',
  'meat.glb',
  'meatloaf.glb',
  'melon.glb',
  'melonfruit.glb',
  'mirror.glb',
  'monitor.glb',
  'mushroom.glb',
  'nightshade.glb',
  'nightshadepotion.glb',
  'notebook.glb',
  'nuclearpotion.glb',
  'octopusmeat.glb',
  'oldbag.glb',
  'oldhelmet.glb',
  'olive.glb',
  'onion.glb',
  'opal.glb',
  'orangeflower.glb',
  'orangekey.glb',
  'parasiteshroom.glb',
  'pastry.glb',
  'pear.glb',
  'pebbles.glb',
  'personshroom.glb',
  'picnicbook.glb',
  'pinkdagger.glb',
  'pinkflame.glb',
  'pinkflower.glb',
  'pinkkey.glb',
  'pinklamp.glb',
  'pinkmirror.glb',
  'pinkpotion.glb',
  'plantpotion.glb',
  'plug.glb',
  'poisoncocoon.glb',
  'poisondagger.glb',
  'poisonfountain.glb',
  'poisonkey.glb',
  'popsickle.glb',
  'portalkey.glb',
  'pot.glb',
  'potatosoup.glb',
  'protomask.glb',
  'psychip.glb',
  'puffcake.glb',
  'puffer.glb',
  'puffshroom.glb',
  'purpleberry.glb',
  'purplebike.glb',
  'purpledagger.glb',
  'purpleflame.glb',
  'purplekey.glb',
  'purplerobe.glb',
  'purplescroll.glb',
  'ragehelmet.glb',
  'rawmeat.glb',
  'redcore.glb',
  'rottingmeat.glb',
  'sashimi.glb',
  'scale.glb',
  'scrap.glb',
  'screen.glb',
  'shrimp.glb',
  'sickle.glb',
  'soulkey.glb',
  'sparkpotion.glb',
  'spikelet.glb',
  'sprig.glb',
  'starwand.glb',
  'stew.glb',
  'stonebutton.glb',
  'strawberry.glb',
  'sub.glb',
  'sulfur.glb',
  'sundae.glb',
  'sunflower.glb',
  'sunsoul.glb',
  'swordhilt.glb',
  'taco.glb',
  'taser.glb',
  'techbottle.glb',
  'techwand.glb',
  'tentacleshroom.glb',
  'thermos.glb',
  'tomatosoup.glb',
  'turquoisedagger.glb',
  'turquoiseshroom.glb',
  'valve.glb',
  'vase.glb',
  'violetflower.glb',
  'wartberry.glb',
  'whitepotion.glb',
  'wingwand.glb',
  'wire.glb',
  'witchhat.glb',
  'woodbox.glb',
  'woodgrenade.glb',
  'yellowcore.glb',
  'yellowflower.glb',
];
const itemUrls = itemNames.map(name => `./packages/zine/resources/items/${name}`);

export class PanelRuntimeItems extends THREE.Object3D {
  constructor({
    candidateLocations,
    n = 1,
    seed = '',
  }) {
    super();

    const rng = alea(seed);
    
    for (let i = 0; i < n; i++) {
      const candidateLocationIndex = Math.floor(rng() * candidateLocations.length);
      const candidateLocation = candidateLocations.splice(candidateLocationIndex, 1)[0];
      const {
        position, // array[3]
        quaternion, // array[4]
      } = candidateLocation;

      const itemUrlIndex = Math.floor(rng() * itemUrls.length);
      const itemName = itemNames[itemUrlIndex];
      const itemUrl = itemUrls[itemUrlIndex];

      const itemJson = {
        name: itemName,
        modelUrl: itemUrl,
      };

      (async () => {
        const opts = {
          type: 'application/item',
          content: itemJson,
          position,
          quaternion,
          components: [
            {
              key: 'itemMode',
              value: 'float',
            },
          ],
        };
        const npcApp = await metaversefileApi.createAppAsync(opts);
        this.add(npcApp);
      })();
    }
  }
}